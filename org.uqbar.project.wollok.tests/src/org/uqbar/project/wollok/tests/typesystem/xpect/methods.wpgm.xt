/* XPECT_SETUP org.uqbar.project.wollok.tests.typesystem.xpect.TypeSystemXpectTestCase END_SETUP */

class Golondrina { 
	// XPECT type at energia --> Number
	var energia = 100
	
	// XPECT methodType at vola --> (Number) => Void
	method vola(kilometros) { energia = energia - kilometros * 10 }
	
	// XPECT methodType at come --> (Number) => Void
	method come(grms) { energia += grms * 0.10 }
}

object pepita {
	// XPECT methodType at nombreAve --> () => String
	method nombreAve() = "Pepita"
}

class Entrenador {
	// XPECT type at estrategia --> {(Golondrina) => Void}
	const estrategia = { ave => ave.vola(5) }
	
	// XPECT methodType at entrena --> (Golondrina) => Void
	method entrena(ave) { ave.vola(5) }
	
	// XPECT methodType at llama --> (pepita) => String
	method llama(p) = p.nombreAve()
	
	// XPECT methodType at estrategia --> () => {(Golondrina) => Void}
	method estrategia() = estrategia
	
	
	// XPECT methodType at falla --> (Golondrina) => Any
	method falla(ave) {
		ave.vola(1)
		// XPECT errors --> "Golondrina does not understand come(). However other methods exist with different argument count: come(grms)" at "ave.come()" 
		return ave.come()	
	}
	
	// XPECT methodType at falla2 --> (Any) => Any
	method falla2(ave) {
		// No errors because Any. Maybe we can throw a warning? 
		return ave.come()	
	}
	
	
	// XPECT methodType at condicion --> () => {() => Boolean}
	method condicion() = { true }
	
	// XPECT methodType at condicion2 --> () => {() => Boolean}
	method condicion2() = { return true }
	
	// XPECT methodType at condicion3 --> () => {() => Boolean}	
	method condicion3() { return { return true } }
	
	// XPECT methodType at entrenarConEstrategia --> (Golondrina) => Void	
	method entrenarConEstrategia(ave) { self.estrategia().apply(ave) }
	
	// XPECT methodType at alimentar --> (Golondrina, Number) => Void	
	method alimentar(golondrina, comida) {
		var c = { g => g.come(comida) } 
		c.apply(golondrina)
	}
}
